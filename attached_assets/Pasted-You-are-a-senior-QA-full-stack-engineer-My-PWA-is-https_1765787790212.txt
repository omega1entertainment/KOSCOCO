You are a senior QA + full-stack engineer. My PWA is https://koscoco.kozzii.africa
 running on Replit. I need a thorough functionality test to ensure the app works flawlessly in production.

Your mission

Map all features (user journeys + admin journeys) from the codebase and UI.

Build a complete test plan, then automate as much as possible, and manually validate the rest using a structured checklist.

Identify all bugs, edge cases, security issues, performance problems, and PWA issues.

Deliver fixes as PR-style patches with clear explanations and verify with tests.

Produce a final report: what was tested, what failed, what was fixed, what still needs attention.

Step 1 — Create a feature inventory (from code + UI)

Scan the repo and list every major module and route:

Auth (signup/login/logout/password reset)

User profile

Registrations + payment (Flutterwave)

Any competitions/events listings

Dashboard

Admin features

Notifications/email/SMS (if any)

File uploads (if any)

Any APIs used by frontend

Output: Feature Matrix (Feature → pages/routes → APIs → DB tables).

Step 2 — Environment & observability setup (must do)

Ensure .env/Replit Secrets are present (only confirm presence, do not print secrets).

Add structured logs with correlation IDs:

request_id, user_id, tx_ref (Flutterwave)

Add global error handler to log stack traces.

Add health check endpoint: GET /api/health that verifies DB connectivity.

Step 3 — Build a complete test plan (write it out)

Create test cases for each feature with:

Preconditions

Steps

Expected result

Data needed

Priority (P0/P1/P2)

Include happy paths + failure paths:

Network drops during save/payment

Duplicate submissions (double click)

Refresh/back button behavior

Session expiry

Invalid inputs / missing required fields

Role-based access (admin vs user)

Rate limits / abuse scenarios

Step 4 — Automate tests (as much as possible)
A) API tests (required)

Use a test runner suitable for the stack (Jest/Supertest, Vitest, Pytest, etc.):

Auth endpoints

Registration endpoints

Payment verification endpoints (Flutterwave mocked)

Admin endpoints

Validation and error handling

B) E2E UI tests (required)

Use Playwright or Cypress:

Signup/login

Browse competitions/events

Start registration

Payment flow (use Flutterwave sandbox or mock flow)

Verify registration completion

Admin login → view registrations → manage records

C) Regression test suite (required)

Create npm run test (or equivalent) that runs:

unit + integration tests

E2E tests (headless)

lint/typecheck (if applicable)

Step 5 — Payment flow testing (Flutterwave specific, P0)

I previously had an issue: payment succeeds but registration doesn’t complete. So:

Ensure registration fulfillment is server-verified (webhook + verify fallback).

Add idempotency tests:

webhook received twice → only one registration created

verify endpoint hit repeatedly → no duplicates

webhook arrives before redirect → still works

redirect happens but webhook delayed → verify completes registration

Mock Flutterwave verify responses where needed.

Step 6 — PWA-specific checks (required)

Validate:

manifest.json correctness (name, icons, start_url, display, theme/background colors)

Service worker registration

Offline fallback behavior (at least graceful messaging)

Cache strategy does not break auth/payment pages

Installability (Lighthouse PWA checks)

Proper HTTPS + correct scope

Push notifications (if implemented)

Provide fixes if any PWA requirements fail.

Step 7 — Security & reliability checks (required)

Audit for:

Broken access control (admin routes protected?)

Input validation / injection risks

CSRF (if cookie sessions)

XSS risks in user-generated content

Secret leakage in logs

CORS correctness

Rate limiting on auth/payment endpoints

Proper webhook signature verification for Flutterwave (verif-hash)

Step 8 — Performance checks (required)

Identify slow DB queries / missing indexes

Frontend bundle size issues

API response times

Add caching only where safe

Ensure timeouts/retries are sensible

Deliverables (you must output)

Feature Matrix

Test Plan (manual + automated)

Automated test suite added to repo

Bug list with severity + reproduction steps

Patches to fix issues found

Final verification report confirming all P0/P1 tests pass

Run the full suite locally in Replit and provide the final results.

If you need test accounts, create seed data scripts (safe, non-production), and a TESTING.md that explains how to run everything.

Proceed now.